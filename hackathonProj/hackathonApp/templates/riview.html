{% extends "base.html" %}
{% load static %}
{% block content %}
  <link href="{% static 'css/riview.css' %}" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <script type="text/javascript" src="js/script.js"></script>

  <!--바디-->
  <div class="structure">
    <div class="content">
      <img src= {{pic}}>
    </div>
    <div class="content">
      <div class="subcontent">
        <h3>{{wine.name}}</h3>
      </div>
      <div class="subcontent">
        <div>
          {{wine.explain}}
        </div>
      </div>
      <style>
        td {
          padding-left: 10px;
        }
      </style>
      <div class="subcontent">
        <table>
          <tr>
            <th>와인종류</th>
            <td>{{wine.kind}}</td>
          </tr>
          <tr>
            <th>생산지</th>
            <td>{{wine.country}}</td>
          </tr>
          <tr>
            <th style="invisible=">
              알코올도수</th>
            <td>{{wine.alchol}}</td>
          </tr>
          <tr>
            <th>포도품종</th>
            {% if wine.grape_type2 == "" %}
              <td>{{wine.grape_type1}}</td>
            {% else %}
              <td>{{wine.grape_type1}},
                {{wine.grape_type2}}</td>
            {% endif %}
          </tr>
        </table>
      </div>
      <div class="subcontent2" style ="padding-left=3px">
        <div class="winetaste">
          <span style="font-weight:bold">Dry</span>
          <img src="{{dry}}">
        </div>
        <div class="winetaste">
          <span style="margin-left:10px; font-weight:bold">Body</span>
          <img src="{{body}}">
        </div>
        <div class="winetaste">
          <span style="margin-left:10px; font-weight:bold" >Tannin</span>
          <img src="{{tannin}}">
        </div>
      </div>
      <div class="subcontent2">
      <style>
        .star-rating{
            width:205px;
        }
        .star-rating,.star-rating span{
            display:inline-block;
            height:39px;
            overflow:hidden;
            background:url(../../static/img/score/star.png)no-repeat;
        }
        .star-rating span{
            background-position:left bottom;
            line-height:0;
            vertical-align:top;
        }
      </style>
        <div class="review">
          <span style="font-weight:bold">평점</span>
          <span class='star-rating'>
          <span style="width:{{star_percent}}"></span>
          </span>
          
          {% comment %} <img src="{% static 'img/rimg/Score4.png' %}"> {% endcomment %}
        </div>
      </div>
      <div class="review">
        <span style="font-weight:bold">리뷰</span>
      {% if reviews == "리뷰가 없습니다." %}
        <p>리뷰가 없습니다.</p>
      {% else %}
        {% for review in reviews %}
        {{review}}
        {{review.star}}
        {{review.body}}
        <br>
      {% endfor %}
      {% endif %}
      </div>
      <div class="review">
        <script>
        if ("{{message}}" != "") 
          alert("{{ message }}")
         </script>
        <span style="font-weight:bold">리뷰쓰기</span>
        {% if user.is_authenticated %}
            <form action="{%url 'wine_info' wine.id %}" method="POST">
                {%csrf_token%}
                <p>와인이름 : {{wine.name}}</p>
                <p>작성자 : {{user.username}}</p>
                <p>별점 : <select class="form-select form-select-sm" name = "star" >
                          <option value="0">별점을 선택해주세요</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                        </select>
                </p>
                <p>본문 : <textarea name = "body" cols="30" rows="10"></textarea></p>
                  <button type="submit" class="btn btn-outline-primary">작성</button>
            </form>
        {% else %}
            <div class="alert alert-warning" role="alert">
              <h4 class="alert-heading">
                <svg class="bi me-2" width="24" height="24" role="img" aria-label="Danger:">
                  <use xlink:href="#exclamation-triangle-fill"/>
                </svg>
                리뷰를 작성하려면 로그인을 해주세요!
              </h4>
                <hr>
            </div>
        {% endif %}
      </div>
    </div>
    
  </div>
{% endblock content %}